---
layout: post
title:  "使用正则表达式编写表单验证插件"
categories: javascript
description: "使用正则表达式打造自己的jQuery表单验证插件"
main-class: 'dev'
color: '#632321'
tags:
- "表单验证"
- "正则表达式"
twitter_text: "使用正则表达式打造自己的jQuery表单验证插件"
introduction: "使用正则表达式打造自己的jQuery表单验证插件"
---

表单的验证是前端开发中经常遇到的一个问题。表单的验证分为客户端验证和服务器验证。
通常情况下，只有验证用户名、密码是否正确等需要读取数据库数据的验证才在服务器端进行验证，而对字符的长度、大小写等字符格式的验证在客户端就能进行。
在客户端使用javascript进行验证能减少服务器负载，缩短用户等待时间，对用户更友好。比较知名的js表单验证插件有validate.js、jFormer、jQuery.validVal等等。
使用正则表达式就能打造自己的jQuery表单验证插件。

### 表单验证的关键——正则表达式
判断用户输入的值是否符合尺寸、大小写、字符规则就需要使用正则表达式RegExp。RegExp 对象提供了test()方法来检测字符串是否符合正则表达式模式的规范。
下面的代码是4个应用正则表达式来验证表单元素的检验函数。
例如`isMobile()`方法是检测元素的输入值是否是手机号码的函数，三个参数分别为表单元素的Dom对象ele，错误提示字符串tipText，以及表单输入值。
变量`d`是一个正则表达式对象，通过'RegExp'的'test()'方法的返回值来判定输入值是否符合手机号码的规律。
若不符合就调用一个表单错误提示函数'$.formTips'来提醒用户输入错误。
中国现行的手机号码都是以'13'、'15'、'18'、'14'、'17'开头的11位数字，因此正则表达式是从'13'、'15'、'18'、'14'、'17'开始匹配，并已9位数字结束。
于是`isMobile()`方法的正则表达式可以写成`"^(13|15|18|14|17)[0-9]{9}$"`,`^`和`$`分别是正则表达式的开始匹配符号和结束匹配符号。
按照这样的规律，我们可以编写其他的检验正则表达式用来检测用户的输入值是否符合规定。
如下代码中的`isPhone()`方法、`isEmail()`方法、`isBankNum()`方法分别用来检测固定电话号码、电子邮件以及银行卡号。
```javascript
var isMobile = function(ele,tipText,value){var d=new RegExp("^(13|15|18|14|17)[0-9]{9}$");return d.test(value)?true:$.formTips(ele,tipText)}
var isPhone = function(ele,tipText,value){var d=new RegExp("^([0-9]{3,4}-)?[0-9]{7,8}$");return d.test(value)?true:$.formTips(ele,tipText)}
var isEmail = function(ele,tipText,value){var d=new RegExp("^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$");return d.test(value)?true:$.formTips(ele,tipText)}
var isBankNum = function(ele,tipText,value){var d=new RegExp("^([0-9]{16}|[0-9]{19})$");return d.test(value)?true:$.formTips(ele,tipText)}
```

### 表单验证的示例
如下图是一个简单的表单，三个输入框分别要求输入中文汉字、18位身份证以及6到12位的密码，且都不能为空。

### 未完待续